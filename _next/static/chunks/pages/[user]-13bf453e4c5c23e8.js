(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[289],{5762:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[user]",function(){return s(3130)}])},3130:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});var n=s(5893),r=s(7294),l=s(1163),o=s(5073);function a(){let e=(0,l.useRouter)(),t=e.query.user,[s,a]=(0,r.useState)(!1),[i,d]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[m,h]=(0,r.useState)(""),[x,g]=(0,r.useState)(""),[f,p]=(0,r.useState)(""),[b,y]=(0,r.useState)(null),[j,v]=(0,r.useState)([]);(0,r.useEffect)(()=>{let t=sessionStorage.getItem("isLoggedIn");t&&"true"===t||e.push("/login")},[]);let N=()=>{fetch("/api/getUserBlogs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})}).then(e=>e.json()).then(e=>{e.success?v(e.blogs):h(e.message)}).catch(e=>{console.error(e),h("An error occurred while fetching the blogs.")})},w=e=>{if(e>=j.length||e<0){console.error("Invalid blog index");return}let s=j[e];fetch("/api/deleteBlog",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,title:s.title,content:s.content})}).then(e=>e.json()).then(t=>{if(t.success){let t=j.filter((t,s)=>s!==e);v(t),h("Blog deleted successfully"),N()}else h(t.message)}).catch(e=>{console.error(e),h("An error occurred while deleting the blog.")})},k=e=>{console.log("Starting edit for blog with index:",e);let t=j[e];y(e),g(t.title),p(t.content)},C=()=>{y(null),g(""),p("")},S=()=>{fetch("/api/updateBlog",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,title:x,content:f})}).then(e=>e.json()).then(e=>{e.success?(h("Blog updated successfully"),y(null),g(""),p(""),N()):h(e.message)}).catch(e=>{console.error(e),h("An error occurred while updating the blog.")})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.default,{}),(0,n.jsx)("div",{className:"min-h-screen bg-gray-100 py-6 flex flex-col justify-center sm:py-12",children:(0,n.jsxs)("div",{className:"relative py-3 sm:max-w-xl sm:mx-auto",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400 to-indigo-600 shadow-lg transform -skew-y-6 sm:skew-y-0 sm:-rotate-6 sm:rounded-3xl"}),(0,n.jsxs)("div",{className:"relative px-4 py-10 bg-white shadow-lg sm:rounded-3xl sm:p-20",children:[(0,n.jsxs)("h1",{className:"text-2xl font-semibold",children:["Welcome, ",t||"Loading..."]}),(0,n.jsxs)("div",{className:"divide-y divide-gray-200",children:[(0,n.jsx)("p",{className:"mt-6 text-indigo-600 text-lg",children:"This is your user dashboard."}),(0,n.jsxs)("div",{className:"mt-8 flex flex-col space-y-4",children:[(0,n.jsx)("button",{onClick:()=>a(!s),className:"px-5 py-3 rounded-md bg-green-500 text-white hover:bg-green-600 focus:outline-none",children:s?"Close Form":"Add Blogs"}),s&&(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("input",{type:"text",value:i,onChange:e=>d(e.target.value),placeholder:"Blog Title",className:"px-4 py-2 border rounded mb-2 w-full"}),(0,n.jsx)("textarea",{value:c,onChange:e=>u(e.target.value),placeholder:"Blog Content",className:"px-4 py-2 border rounded w-full h-40 mb-2"}),(0,n.jsx)("button",{onClick:()=>{fetch("/api/saveblog",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,title:i,content:c})}).then(e=>e.json()).then(e=>{e.success&&(h("Blog saved successfully"),d(""),u(""))}).catch(e=>{console.error(e),h("An error occurred.")})},className:"bg-indigo-500 hover:bg-indigo-600 text-white px-5 py-2 rounded-md",children:"Add"}),m&&(0,n.jsx)("p",{className:"mt-4 text-red-500",children:m})]}),(0,n.jsx)("button",{onClick:N,className:"px-5 py-3 rounded-md bg-blue-500 text-white hover:bg-blue-600 focus:outline-none",children:"Show My Blogs"}),j.map((e,t)=>(0,n.jsx)("div",{className:"mt-4 border p-4 rounded",children:b===t?(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"text",value:x,onChange:e=>g(e.target.value),className:"px-4 py-2 border rounded mb-2 w-full"}),(0,n.jsx)("textarea",{value:f,onChange:e=>p(e.target.value),className:"px-4 py-2 border rounded w-full h-40 mb-2"}),(0,n.jsx)("button",{onClick:S,className:"bg-yellow-500 hover:bg-yellow-600 text-white px-5 py-2 rounded-md",children:"Save"}),(0,n.jsx)("button",{onClick:C,className:"ml-4 bg-gray-500 hover:bg-gray-600 text-white px-5 py-2 rounded-md",children:"Cancel"})]}):(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-xl font-bold",children:e.title}),(0,n.jsx)("p",{children:e.content}),(0,n.jsx)("button",{onClick:()=>w(t),className:"ml-4 bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-md",children:"Delete"}),(0,n.jsx)("button",{onClick:()=>k(t),className:"ml-4 bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-md",children:"Edit"})]})},t))]})]})]})]})})]})}},5073:function(e,t,s){"use strict";s.r(t);var n=s(5893),r=s(7294),l=s(1163);t.default=()=>{let[e,t]=(0,r.useState)(!1),s=(0,r.useRef)(null),o=(0,l.useRouter)(),[a,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{i("true"===sessionStorage.getItem("isLoggedIn"))},[]),(0,r.useEffect)(()=>{let e=e=>{s.current&&!s.current.contains(e.target)&&t(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"min-h-full",children:(0,n.jsx)("nav",{className:"bg-gray-800",children:(0,n.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex h-16 items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)("img",{className:"h-8 w-8",src:"https://tailwindui.com/img/logos/mark.svg?color=indigo&shade=500",alt:"Your Company"})}),(0,n.jsx)("div",{className:"hidden md:block",children:(0,n.jsxs)("div",{className:"ml-10 flex items-baseline space-x-4",children:[(0,n.jsx)("a",{href:"#",className:"bg-gray-900 text-white rounded-md px-3 py-2 text-sm font-medium","aria-current":"page",children:"Blogger web"}),(0,n.jsx)("a",{href:"/",className:"text-gray-300 hover:bg-gray-700 hover:text-white rounded-md px-3 py-2 text-sm font-medium",children:"Blogs"}),(0,n.jsx)("a",{href:"#",className:"text-gray-300 hover:bg-gray-700 hover:text-white rounded-md px-3 py-2 text-sm font-medium",children:"contact us"})]})})]}),(0,n.jsx)("div",{className:"hidden md:block",children:(0,n.jsx)("div",{className:"ml-4 flex items-center md:ml-6",children:(0,n.jsx)("div",{className:"relative ml-3",ref:s,children:a?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{type:"button",className:"relative flex max-w-xs items-center rounded-full bg-gray-800 text-sm focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800",onClick:()=>{t(!e)},children:[(0,n.jsx)("span",{className:"absolute -inset-1.5"}),(0,n.jsx)("span",{className:"sr-only",children:"Open user menu"}),(0,n.jsx)("img",{className:"h-8 w-8 rounded-full",src:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80",alt:""})]}),e&&(0,n.jsx)("div",{className:"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu-button",tabIndex:"-1",children:(0,n.jsx)("button",{onClick:()=>{sessionStorage.setItem("isLoggedIn","false"),o.push("/login")},className:"block px-4 py-2 text-sm text-gray-700",role:"menuitem",tabIndex:"-1",id:"user-menu-item-2",children:"Sign out"})})]}):(0,n.jsx)("a",{href:"/login",className:"text-gray-300 hover:bg-gray-700 hover:text-white rounded-md px-3 py-2 text-sm font-medium",children:"login"})})})}),(0,n.jsx)("div",{className:"-mr-2 flex md:hidden",children:(0,n.jsxs)("button",{type:"button",className:"relative inline-flex items-center justify-center rounded-md bg-gray-800 p-2 text-gray-400 hover:bg-gray-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800","aria-controls":"mobile-menu","aria-expanded":"false",children:[(0,n.jsx)("span",{className:"absolute -inset-0.5"}),(0,n.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,n.jsx)("svg",{className:"block h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),(0,n.jsx)("svg",{className:"hidden h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})})]})})})})})}},1163:function(e,t,s){e.exports=s(6885)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=5762)}),_N_E=e.O()}]);